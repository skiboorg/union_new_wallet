(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[659],{75008:(e,t,a)=>{"use strict";a.d(t,{C:()=>s,d:()=>o});var l=a(13433),n=a(17779);const o=({seed:e,password:t})=>{const a={status:!0,seed:e},n=l.createCipher("aes192",t);return n.update(JSON.stringify(a),"utf8","hex")+n.final("hex")},s=({hash:e,password:t})=>{try{const a=l.createDecipher("aes192",t),n=a.update(e,"hex","utf8")+a.final("utf8"),o=JSON.parse(n);return!!o.status&&o.seed}catch(a){return n.log(a),!1}}},12659:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>te});var l=a(59835),n=a(86970),o=a(744),s=a.n(o);const i=e=>((0,l.dD)("data-v-553bd634"),e=e(),(0,l.Cn)(),e),u=i((()=>(0,l._)("img",{src:s()},null,-1))),c={class:"text-white text-bold no-margin text-h5"},d={class:"form-wrapper"},r={key:1},g={class:"text-center text-weight-bold"};function p(e,t,a,o,s,i){const p=(0,l.up)("Login"),v=(0,l.up)("btn"),_=(0,l.up)("Register"),m=(0,l.up)("page-body"),w=(0,l.up)("page");return(0,l.wg)(),(0,l.j4)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"page-body main-gradient"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,n.C_)(["logo",{"logo-small":o.is_seed_good||o.hash}])},[u,(0,l._)("p",c,(0,n.zw)(o.wallet_name),1)],2),(0,l._)("div",d,[o.loginActive?((0,l.wg)(),(0,l.j4)(p,{key:0,onSeedGood:o.setSeed},null,8,["onSeedGood"])):(0,l.kq)("",!0),o.is_seed_good||!o.loginActive||o.hash?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("p",g,(0,n.zw)(e.$t("or_btn")),1),(0,l.Wm)(v,{label:e.$t("create_btn"),outline:!1,onClick:t[0]||(t[0]=e=>o.loginActive=!1)},null,8,["label"])])),o.loginActive?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:2,onOpenLogin:o.openLogin},null,8,["onOpenLogin"]))])])),_:1})])),_:1})}a(46727);var v=a(60499),_=a(87270),m=a(75008),w=a(9991),h=a(18910),b=a(96928),y=a(43463),x=a(44974),f=a(17779);const k={class:"text-h6 text-bold text-center text-primary q-mb-lg"},S={key:0},q={key:0,class:"flex column justify-between"},H={class:""},$={key:1,class:"pincode-tab"},C={__name:"Login",emits:["seedGood"],setup(e,{emit:t}){const a=(0,w.QT)(),o=(0,h.tv)(),s=[{label:"Русский",value:"ru-RU"},{label:"English",value:"en-US"},{label:"French",value:"fr-FR"},{label:"हिन्दी Hindī",value:"hi-IN"}],i=(0,v.iH)(null),u=(0,b.t)(),c=(0,y.s)(),d=(0,x.T)(),r=(0,v.iH)(""),g=(0,v.iH)(""),p=((0,v.iH)(!0),localStorage.getItem("hash"));async function C(e){const t=(0,m.C)({hash:p,password:e});t?(r.value=t,await D()):(0,_.d$)("negative",a.t("wrong_pin"))}async function D(){c.toggleLoadingState();const e=(0,m.d)({seed:r.value,password:g.value});await u.login(r.value,e);const t=localStorage.getItem("addresses");await d.connectWS(JSON.parse(t)[0].address),c.toggleLoadingState(),await o.push({name:"wallet_index"})}async function L(e){g.value=e,await D()}async function z(){await u.logout()}function I(e){const a=/^[A-Za-z0-9]+$/;return!!a.test(e)&&(t("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}(0,l.wF)((()=>{const e=localStorage.getItem("lang");i.value=s.find((t=>t.value===e))}));const W=()=>{f.log(i.value),localStorage.setItem("lang",i.value.value),o.go("/")};return(e,t)=>{const a=(0,l.up)("q-select"),o=(0,l.up)("q-input"),u=(0,l.up)("pin-code"),c=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("p",k,(0,n.zw)(e.$t("login_title")),1),(0,v.SU)(p)?((0,l.wg)(),(0,l.iD)("div",$,[(0,l.Wm)(u,{showDigits:!1,onPincode_ready:C}),(0,l.Wm)(c,{rounded:"","no-caps":"",outline:"",flat:"",class:"full-width q-mt-md",onClick:z,size:"14px",dense:"",color:"negative",label:e.$t("lost_pin")},null,8,["label"])])):((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)(a,{modelValue:i.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.value=e),W],options:s,outlined:"",rounded:"",label:"Выберите язык/Choose language",class:"q-mb-lg"},null,8,["modelValue"]),(0,l.Wm)(o,{autofocus:"",outlined:"",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),color:"primary",label:e.$t("enter_seed"),rounded:"",rules:[t=>t&&t.length>0||e.$t("req_field"),t=>I(t)||e.$t("wrong_seed")]},null,8,["modelValue","label","rules"]),I(r.value)?((0,l.wg)(),(0,l.iD)("div",q,[(0,l._)("div",H,[(0,l.Wm)(u,{showDigits:!0,onPincode_ready:L})])])):(0,l.kq)("",!0)]))],64)}}};var D=a(57786),L=a(13119),z=a(24455),I=a(69984),W=a.n(I);const U=C,V=U;W()(C,"components",{QSelect:D.Z,QInput:L.Z,QBtn:z.Z});var O=a(99407);const Q={class:"text-h6 text-bold text-center text-primary"},T={key:0,class:""},N={class:"text-weight-bold text-center text-negative"},Z=["innerHTML"],j={target:"_blank",href:"https://wallet.rupay.pro/rupay_user_agreement.pdf"},A={key:1,class:""},F={class:"text-center q-mt-md"},R={key:2,class:""},G={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},J={class:"text-caption text-negative q-pa-md text-weight-medium"},P={__name:"Register",emits:["openLogin"],setup(e,{emit:t}){const a=(0,w.QT)(),o=(0,b.t)(),s=(0,h.tv)(),i=(0,x.T)(),u=(0,v.iH)(1),c=(0,v.iH)(""),d=((0,v.iH)(!0),(0,v.iH)(!1)),r=(0,v.iH)(!1);let g=(0,v.iH)(null);const p=(0,v.iH)([{agree:!1,text:a.t("reg_agree1")},{agree:!1,text:a.t("reg_agree2")},{agree:!1,text:a.t("reg_agree3")}]),y=(0,l.Fl)((()=>p.value[0].agree&&p.value[1].agree&&p.value[2].agree));function f(){t("openLogin")}async function k(e){c.value=e,await S()}async function S(){d.value=!d.value,g.value=await O.EraChain.Crypt.generateSeed(),d.value=!d.value,u.value=3}async function q(){d.value=!d.value;const e=(0,m.d)({seed:g.value,password:c.value});await o.login(g.value,e);const t=localStorage.getItem("addresses");await i.connectWS(JSON.parse(t)[0].address),await s.push({name:"wallet_index"}),d.value=!d.value}async function H(){await(0,_.QO)(g.value,"positive",a.t("seed_copy_done")),r.value=!0}return(e,t)=>{const a=(0,l.up)("q-toggle"),o=(0,l.up)("btn"),s=(0,l.up)("pin-code"),i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("p",Q,(0,n.zw)(e.$t("reg_title")),1),1===u.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("p",N,(0,n.zw)(e.$t("reg_agree")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.value,((e,t)=>((0,l.wg)(),(0,l.j4)(a,{modelValue:p.value[t].agree,"onUpdate:modelValue":e=>p.value[t].agree=e,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,l.w5)((()=>[(0,l._)("p",{class:"no-margin",innerHTML:e.text},null,8,Z)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),(0,l._)("p",null,[(0,l._)("a",j,(0,n.zw)(e.$t("user_agreement")),1)]),(0,v.SU)(y)?((0,l.wg)(),(0,l.j4)(o,{key:0,label:e.$t("seed_copy_next"),onClick:t[0]||(t[0]=e=>u.value=2),type:"submit",outline:!1},null,8,["label"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),2===u.value?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(s,{showDigits:!0,onPincode_ready:k}),(0,l._)("div",F,[(0,l._)("p",{class:"text-caption no-margin",onClick:f},(0,n.zw)(e.$t("have_seed")),1)])])):(0,l.kq)("",!0),3===u.value?((0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("p",null,(0,n.zw)(e.$t("your_seed")),1),(0,l._)("p",G,(0,n.zw)((0,v.SU)(g)),1),(0,l.Wm)(i,{rounded:"",outline:"",onClick:H,"no-caps":"",label:e.$t("seed_copy_btn"),unelevated:"",color:"primary",class:"full-width q-mb-md"},null,8,["label"]),(0,l._)("p",J,(0,n.zw)(e.$t("seed_copy")),1),(0,l.Wm)(o,{label:r.value?e.$t("seed_copy_next"):e.$t("seed_copy_need_copy"),disabled:!r.value,is_loading:d.value,onClick:q,type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,l.kq)("",!0)],64)}}};var E=a(23175);const Y=P,B=Y;W()(P,"components",{QToggle:E.Z,QBtn:z.Z});const M={name:"IndexPage",components:{Register:B,Login:V},preFetch({redirect:e,router:t}){localStorage.getItem("seed")},setup(){const e=(0,v.iH)(!0),t=(0,v.iH)(!1),a=localStorage.getItem("hash"),l="ONEUNION";function n(e){t.value=e.val}function o(a){t.value=!1,e.value=!0}return{loginActive:e,is_seed_good:t,hash:a,wallet_name:l,setSeed:n,openLogin:o}}};var K=a(11639),X=a(18149);const ee=(0,K.Z)(M,[["render",p],["__scopeId","data-v-553bd634"]]),te=ee;W()(M,"components",{QField:X.Z})},744:(e,t,a)=>{e.exports=a.p+"img/logo.5329c942.png"}}]);